<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="author" content="Ibrahim Zada">

    <!-- Title -->
    <title>Tally Counter</title>

    <!-- OG Tags -->
    <meta property="og:title" content="Tally Counter">
    <meta property="og:image" content="/assets/img/og.png">
    <meta property="og:description" name="description" content="Count instantly using the online tally counter!">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/assets/img/icon.png">
    <link rel="apple-touch-icon" type="image/png" href="/assets/img/icon.png">

    <!-- Theme -->
    <meta name="theme-color" content="#000000">

    <!-- CSS -->
    <style>
      @font-face {
          font-family: 'Poppins';
          src: url('./assets/font/Poppins-Light.ttf');
      }
      @font-face {
          font-family: 'Poppins';
          src: url('./assets/font/Poppins-Medium.ttf');
          font-weight: bold;
      }
      body {
        font-family: 'Poppins', sans-serif;
        background-color: #fffbe9;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 75vh;
        margin: 0;
        touch-action: manipulation;
    }
    .counter {
        font-size: 4rem;
        margin-bottom: 20px;
        user-select: none;
    }
    .buttons {
        display: flex;
        gap: 10px;
    }
    button {
        padding: 10px 20px;
        font-size: 1.2rem;
        border: none;
        border-radius: 6px;
        cursor: pointer;
    }
    .decrement, .reset { background-color: #c0c0c0; color: black; }
    button:hover { opacity: 0.8; }

    /*Cookie Confirm Button*/

    .confirm {
      border-radius: 6px;
  }
  .confirm:hover {
      opacity: 80%;
  }
  .learn-more:hover {
      opacity: 80%;
      border-bottom: none;
  }

  /*Pace Loader*/
  .pace {
      -webkit-pointer-events: none;
      pointer-events: none;

      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
  }
  .pace-inactive {
      display: none;
  }
  .pace .pace-progress {
      background: #c0c0c0;
      position: fixed;
      z-index: 2000;
      top: 0;
      right: 100%;
      width: 100%;
      height: 4px;
  }
</style>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ELNWZ69M11"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-ELNWZ69M11');
</script>

</head>
<body>
    <div class="counter" id="counter">0</div>
    <div class="buttons">
        <button class="decrement" onclick="changeCount(-1)">-</button>
        <button class="reset" onclick="resetCount()">Reset</button>
    </div>

    <!-- JS -->
    <script src="./assets/js/pace.min.js"></script>
    <script src="./assets/js/cookie.notice.min.js"></script>
    <script>
        const STORAGE_KEY = 'tallyCount';
        let count = 0;
        const counterDisplay = document.getElementById('counter');

        function render() {
            counterDisplay.textContent = count;
        }

        function save() {
            try {
                localStorage.setItem(STORAGE_KEY, String(count));
            } catch (e) {
                // Fail silently if storage is unavailable
            }
        }

        function load() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                count = saved !== null && !isNaN(parseInt(saved, 10)) ? parseInt(saved, 10) : 0;
            } catch (e) {
                count = 0;
            }
            render();
        }

        function changeCount(value) {
            count += value;
            render();
            save();
        }

        function resetCount() {
            if (!confirm('Are you sure you want to reset the count?')) return;
            count = 0;
            render();
            try {
                localStorage.removeItem(STORAGE_KEY);
            } catch (e) {}
        }

        document.addEventListener('DOMContentLoaded', load);

        document.body.addEventListener('pointerdown', function(event) {
            if (!event.target.closest('button')) {
                changeCount(1);
            }
        });
    </script>

</body>
</html>
